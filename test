<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Center Inventory</title>
    <style>
        body {
            background-color: #001f3f; /* dark blue */
            color: #fff; /* white */
            font-family: Arial, sans-serif;
        }

        h1, h2, strong {
            color: #fff; /* white */
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            color: #fff; /* white */
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #fff; /* white */
        }

        th {
            background-color: #003366; /* darker blue */
        }

        td {
            background-color: #004080; /* dark blue */
        }

        button {
            background-color: #0066cc; /* blue */
            color: #fff; /* white */
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }

        button:hover {
            background-color: #004080; /* darker blue on hover */
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 5px;
        }

        .cpu-info {
            color: yellow; /* yellow */
        }

        .cpu-info span {
            color: white; /* white */
            text-transform: uppercase;
        }
    </style>
</head>

<body>
    <h1>Data Center Inventory</h1>

    {% for data_center in inventory %}
    <h2>{{ data_center['name'] }}</h2>

    <table>
        <thead>
            <tr>
                <th>Host</th>
                <th>Cores</th>
                <th>Memory</th>
                <th>Networks</th>
                <th>CPUs</th>
            </tr>
        </thead>
        <tbody>
            {% for host in data_center['hosts'] %}
            <tr>
                <td>
                    <strong>{{ host['name'] }}</strong>
                    <button data-target="{{ host['name'] }}" onclick="toggleDetails('{{ host['name'] }}')">+</button>
                    <div id="{{ host['name'] }}_details" style="display: none;">
                        {% if host['cpus'] %}
                        <h4>CPUs</h4>
                        <ul>
                            {% for cpu, details in host['cpus'].items() %}
                            <li>
                                <strong class="cpu-info">
                                    {{ cpu }} -
                                    <span>TYPE:</span> {{ details['type'] }},
                                    <span>NAME:</span> {{ details['name'] }},
                                    <span>STREAM:</span> {{ details['stream'] }}
                                </strong>
                                <button data-target="{{ host['name'] }}_{{ cpu }}" onclick="toggleDetails('{{ host['name'] }}_{{ cpu }}')">+</button>
                                <div id="{{ host['name'] }}_{{ cpu }}_details" style="display: none; margin-left: 20px;">
                                    <p>Via: {{ details['via'] }}</p>
                                    <p>Outputs: {{ details['outputs'] }}</p>

                                    <!-- New Section to Display Actors -->
                                    {% if 'actors' in details %}
                                        <h5>Actors</h5>
                                        <ul>
                                            {% for actor in details['actors'] %}
                                                <li>{{ actor['name'] }}</li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                    <!-- End of New Section -->

                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </td>
                <td>{{ host['cores'] }}</td>
                <td>{{ host['memory'] }}</td>
                <td>
                    <ul>
                        {% for network, ip in host['networks'].items() %}
                        <li>{{ network }}: {{ ip }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>{{ host['cpus']|length if host['cpus'] else 'N/A' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% endfor %}

    <script>
        function toggleDetails(elementId) {
            var detailsElement = document.getElementById(elementId + "_details");
            var buttonElement = document.querySelector('button[data-target="' + elementId + '"]');

            if (detailsElement.style.display === "none") {
                detailsElement.style.display = "block";
                buttonElement.textContent = "-";
            } else {
                detailsElement.style.display = "none";
                buttonElement.textContent = "+";
            }
        }
    </script>
</body>

</html>
