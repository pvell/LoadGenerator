def fromApp(self, message, sessionID):
    formatted_message = self.format_message(message)
    print("Received application message", formatted_message)

def format_message(self, message):
    # Extract the message fields
    field_dict = {}
    for i in range(1, message.getNumFields()):
        field = fix.Field()
        message.getField(i, field)
        field_dict[field.getField()] = field.getString()

    # Sort the fields by tag number
    sorted_fields = sorted(field_dict.items(), key=lambda x: int(x[0]))

    # Create the formatted message string
    formatted_message = ''
    for tag, value in sorted_fields:
        formatted_message += f'{tag}={value}|'

    # Remove the trailing delimiter
    formatted_message = formatted_message[:-1]

    return formatted_message
