from pysbe import SbeEncoder, SbeDecoder

# Step 1: Define the SBE schema file path
schema_file = 'path/to/your/sbe-schema.xml'

# Step 2: Create an instance of SbeEncoder
encoder = SbeEncoder(schema_file)

# Step 3: Create an instance of SbeDecoder
decoder = SbeDecoder(schema_file)

# Step 4: Define the message ID and input message for encoding
message_id = 1

# Step 5: Set field values in the message object
obj = {
    'SendingTime': 1623155790000000000,
    'ClOrdID': 'ABC123',
    'OptionsSecurityID': 'XYZ456',
    'Side': 'Buy',
    'OrderQty': 100,
    'OrdType': 'Market',
    'Price': '5678.0',
    'TimeInForce': 'Day',
    'OpenOrClose': 'Open',
    'ExecInst': 'DoNotIncrease',
    'TradingCapacity': 'Principal',
    'RepriceFrequency': 'Daily',
    'RepriceBehavior': 'CancelOldest',
    'MtpGroupID': 1,
    'MatchTradePrevention': 'PreventSelfMatch',
    'CancelGroupID': 2,
    'RiskGroupID': 3,
}

# Step 6: Encoding
encoded_message = encoder.encode(message_id, obj)

# Print the encoded message
print("Encoded message:")
print(encoded_message)

# Step 7: Decoding
decoded_message = decoder.decode(message_id, encoded_message)

# Print the decoded message
print("Decoded message:")
print(decoded_message)
