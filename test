mdesembrana@sftp01:/etc/systemd/system$ cat sync_occ_files.service 
[Unit]
Description=sync occ files daily service

[Service]
Type=simple
User=techops-files-download
ExecStart=/opt/techops/scripts/sync_occ_files_daily.sh
StandardOutput=journal
SyslogIdentifier=sync_occ_files

[Install]
WantedBy=multi-user.target
mdesembrana@sftp01:/etc/systemd/system$ cat /opt/techops/scripts/sync_occ_files_daily.sh
#!/bin/bash

d=$(date +%Y-%m-%d)

echo "Syncing files to S3"

/usr/local/bin/aws s3 sync /mnt/occ/downloads/prod/ s3://memx-options-security-files --profile memx-options-security-files-user
/usr/local/bin/aws s3 sync /mnt/occ/orsa-summary s3://memx-options-security-files/orsa-summary --exclude "*" --include "*.csv" --profile memx-options-security-files-user

echo "File upload completed"
mdesembrana@sftp01:/etc/systemd/system$ cat sync_occ_files.timer
[Unit]
Description=sync occ files timer

[Timer]
OnCalendar=Mon,Tue,Wed,Thu,Fri,Sat *-*-* 01..05:00,15,30,45:00
Unit=sync_occ_files.service

[Install]
WantedBy=multi-user.target
