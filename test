def generate_load(self):
    # Read the template file and extract message templates
    with open(self.template_file, 'r') as file:
        templates = file.readlines()

    # Generate messages based on weights
    load = []
    for template in templates:
        message_type = self.get_message_type(template)
        if message_type and message_type in self.message_weights:
            weight = int(self.message_weights[message_type])
            print(f"Adding {weight} instances of message type {message_type}")
            load.extend([template.strip()] * weight)

    print(f"Generated load: {load}")
    random.shuffle(load)
    load_length = len(load)
    iterations = int(self.message_rate * self.send_duration)

    # Repeat load if necessary to achieve desired send duration
    if iterations > load_length:
        quotient, remainder = divmod(iterations, load_length)
        print(f"Repeating load: {quotient} times, with remainder: {remainder}")
        load = load * quotient + load[:remainder]
    else:
        load = load[:iterations]

    return load
    
    
    
    
    Session created - FIXT.1.1:EXP01_14->MEMX
Adding 1 instances of message type 5
Generated load: ['8=FIXT.1.1|9=49|35=5|49=EXP01_14|56=MEMX|34=<MsgSeqNum>|52=<SendingTime>|10=<CheckSum>|']
Repeating load: 600 times, with remainder: 0
69
generated_message 8=FIXT.1.19=5635=534=6949=EXP01_1452=20230609-14:28:58.75456=MEMX10=00110=195
generated_message 8=FIXT.1.19=5635=534=6949=EXP01_1452=20230609-14:28:58.75456=MEMX10=00110=195
56
sent admin message 8=FIXT.1.19=5635=534=6949=EXP01_1452=20230609-14:28:58.75456=MEMX10=00110=195
sent admin message 8=FIXT.1.19=7735=A34=7049=EXP01_1452=20230609-14:28:58.75456=MEMX98=0108=11137=1.1010=123
Session disconnected for FIXT.1.1:EXP01_14->MEMX
sent admin message 8=FIXT.1.19=5635=534=7149=EXP01_1452=20230609-14:28:58.75556=MEMX10=189
Logout initiated - FIXT.1.1:EXP01_14->MEMX
sent admin message 8=FIXT.1.19=7735=A34=7249=EXP01_1452=20230609-14:28:58.75556=MEMX98=0108=11137=1.1010=126
Logout initiated - FIXT.1.1:EXP01_14->MEMX
73
generated_message 8=FIXT.1.19=5635=534=7349=EXP01_1452=20230609-14:28:59.75656=MEMX10=25310=193
generated_message 8=FIXT.1.19=5635=534=7349=EXP01_1452=20230609-14:28:59.75656=MEMX10=25310=193
56
sent admin message 8=FIXT.1.19=5635=534=7349=EXP01_1452=20230609-14:28:59.75656=MEMX10=25310=193
74
generated_message 8=FIXT.1.19=5635=534=7449=EXP01_1452=20230609-14:29:00.75756=MEMX10=24010=182
generated_message 8=FIXT.1.19=5635=534=7449=EXP01_1452=20230609-14:29:00.75756=MEMX10=24010=182
56
sent admin message 8=FIXT.1.19=5635=534=7449=EXP01_1452=20230609-14:29:00.75856=MEMX10=24010=183
75
generated_message 8=FIXT.1.19=5635=534=7549=EXP01_1452=20230609-14:29:01.75956=MEMX10=24810=186
generated_message 8=FIXT.1.19=5635=534=7549=EXP01_1452=20230609-14:29:01.75956=MEMX10=24810=186
56
sent admin message 8=FIXT.1.19=5635=534=7549=EXP01_1452=20230609-14:29:01.75956=MEMX10=24810=186
76
generated_message 8=FIXT.1.19=5635=534=7649=EXP01_1452=20230609-14:29:02.76056=MEMX10=23610=180
generated_message 8=FIXT.1.19=5635=534=7649=EXP01_1452=20230609-14:29:02.76056=MEMX10=23610=180
56
sent admin message 8=FIXT.1.19=5635=534=7649=EXP01_1452=20230609-14:29:02.76156=MEMX10=23610=181
77
generated_message 8=FIXT.1.19=5635=534=7749=EXP01_1452=20230609-14:29:03.76256=MEMX10=24410=184
generated_message 8=FIXT.1.19=5635=534=7749=EXP01_1452=20230609-14:29:03.76256=MEMX10=24410=184
56
sent admin message 8=FIXT.1.19=5635=534=7749=EXP01_1452=20230609-14:29:03.76256=MEMX10=24410=184
78
generated_message 8=FIXT.1.19=5635=534=7849=EXP01_1452=20230609-14:29:04.76456=MEMX10=25210=188
generated_message 8=FIXT.1.19=5635=534=7849=EXP01_1452=20230609-14:29:04.76456=MEMX10=25210=188
56
sent admin message 8=FIXT.1.19=5635=534=7849=EXP01_1452=20230609-14:29:04.76456=MEMX10=25210=188
79
generated_message 8=FIXT.1.19=5635=534=7949=EXP01_1452=20230609-14:29:05.76556=MEMX10=24910=191
generated_message 8=FIXT.1.19=5635=534=7949=EXP01_1452=20230609-14:29:05.76556=MEMX10=24910=191
56
sent admin message 8=FIXT.1.19=5635=534=7949=EXP01_1452=20230609-14:29:05.76656=MEMX10=24910=192
80
generated_message 8=FIXT.1.19=5635=534=8049=EXP01_1452=20230609-14:29:06.76756=MEMX10=24810=186
generated_message 8=FIXT.1.19=5635=534=8049=EXP01_1452=20230609-14:29:06.76756=MEMX10=24810=186
56
sent admin message 8=FIXT.1.19=5635=534=8049=EXP01_1452=20230609-14:29:06.76756=MEMX10=24810=186
81
generated_message 8=FIXT.1.19=5635=534=8149=EXP01_1452=20230609-14:29:07.76956=MEMX10=24710=190
generated_message 8=FIXT.1.19=5635=534=8149=EXP01_1452=20230609-14:29:07.76956=MEMX10=24710=190
56
sent admin message 8=FIXT.1.19=5635=534=8149=EXP01_1452=20230609-14:29:07.76956=MEMX10=24710=190
