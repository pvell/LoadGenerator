 
 

MEMX Regulation
Market Surveillance System BRD
 
 
 
 
















Version: 1.0 
Date: 1/16/2024 
 
 
Confidential  
Table of Contents
1.	Change Log	3
2.	Summary	3
3.	Objectives	4
4.	Stakeholders	4
5.	Key Considerations	4
6.	Migration	4
7.	Alert Generation System	4
8.	Surveillance Management System	5
8.1.	Requirements	5
8.2.	Potential System Diagrams	6
8.2.1.	Decoupled Generic	6
8.2.2.	Jira Based	7
8.3.	Workflows	7
8.3.1.	Alerts	7
8.3.2.	Matters	7
8.4.	Screens	8
8.4.1.	Alert	8
8.4.2.	Alert Detail	9
8.4.3.	Matter	10
8.4.4.	Matter Detail	11
8.4.5.	Advanced Search	12
8.4.6.	Notifications	13
8.4.7.	Notification Dialog	14
8.4.8.	Reports	15
8.4.9.	LH Flyout	16
8.4.10.	Administration	17
8.5.	General Functionality	17
8.5.1.	Audit/History Logging	17
8.5.2.	Notifications	17
8.5.3.	Header Menu	18
8.6.	Alerts	18
8.6.1.	Menu Links	18
8.6.2.	Menu Buttons	18
9.1.1.	Advanced Search Fields	19
9.1.2.	Grid Fields	19
9.1.3.	Details Fields	19
9.1.4.	Document Fields	20
9.1.5.	Tabs	20
9.1.6.	Notifications	20
9.1.7.	State Transition Buttons	21
9.2.	Matters	21
9.2.1.	Aging	21
9.2.2.	Menu Links	21
9.2.3.	Menu Buttons	21
9.2.4.	Advanced Search Fields	22
9.2.5.	Grid Fields	22
9.2.6.	Details Fields	22
9.2.7.	Document Fields	23
9.2.8.	Tabs	23
9.2.9.	Notifications	24
9.2.10.	State Transition Buttons	24
9.3.	Operational Dashboard	24
9.4.	Administration / User Configuration Options	24
10.	Investigatory Tools	25
10.1.	Reporting	25
10.1.1.	General	25
10.1.2.	Reports	26
10.2.	Replay	26
10.3.	Spread	26
11.	Surveillance Patterns	26
11.1.	Alerts	26
11.1.1.	Wash Trade A-A	26
11.1.2.	High Order Rate	28
11.2.	Market Making	28


1.	Change Log

Date 	Version 	Updater 	Description 
1/16/2024 	1.0 	Adam Santamaria 	Document creation 


2.	Summary
To describe the business requirements for a Market Surveillance System. The system will consume streaming financial data in real time, generate alerts based off patterns, which are then consumed by an application that organizes these alerts, allows users to analyze them and the related data around them, and perform the required regulatory functions with them, such as adding them to matters.
3.	Objectives
•	A decoupled Surveillance Management System that can be used with one or more Alert Generation systems that support Web Service calls at alert generation time.
•	This will allow us to decouple the SMARTS alert generation from ALMAS alert management system/case management system. It is the first step to eventually migrate MEMXR from the SMARTS platform.
•	Will be able to consume alerts and information from other sources such as DeepHaven or MEMX User Portal.
•	Web based, mobile friendly.
•	Will give MEMXR more control of surveillance system.
•	Performant user experience.
•	Single point of software deployment vs installed Rich client
•	Modern look and feel.
•	Role based user accounts at application level with hooks to Identity Providers.
4.	Stakeholders
•	MEMX Regulation
5.	Key Considerations
•	As operationally simplistic as possible
•	Decoupled architecture
•	Migration pathway from legacy systems
6.	Migration
•	We should consider having connectors for 3rd party systems to facilitate a smooth transition from customers’ existing surveillance system to ours.
7.	Alert Generation System
•	On boarding
•	Migration
•	Deployment
•	Architecture
o	Cloud vs On Prem
•	Compute/Storage Elasticity
o	Theoretical compute limitations (10bn/day?)
•	Data
o	Should accept multiple streams at once in various file formats such as FIX.
o	Current requirements are for 120 calendar days hot.
o	Data storage efficiency
o	Exportability
o	Data should be “replayable” into the system in the event of system disruptions etc.
•	Surveillance Queries
o	Must be written in a common language such as SQL, Java, or Python
o	Real time vs Post Trade
o	Sliding time window analysis
•	Command and Control
o	Ideally the alert generation system should have a comprehensive API layer that exposes command and control functionality, processing status, and data retrieval.

8.	Surveillance Management System
8.1.	Requirements
•	The system can handle a rapid number of alerts in bursts in a performant fashion.
•	The system will add alerts in the order they were generated, not necessarily received.
•	The system can consume alerts from any alert generation system via web call/json/POST request.
•	The system will have a robust user role/entitlement system.
•	The free text search will be performant over a large collection of alerts and metadata.
•	Notifications will be presented to the user in the upper right-hand corner in a glyph with an active counter.
•	Within each Alert there shall be a link where possible to Spread, Replay, and other analysis applications.
•	Within each Matter there shall be a link to the {REG PORTAL} to create RFI templates
•	There shall be a system where incoming documents submitted via {REG PORTAL} flow into SMS.
•	Every day a list of active symbols shall flow into SMS.
•	Every day a list of trading members shall flow into SMS.
•	There will be robust audit and historical logging of all incoming Alerts, SMS events, and user action.
•	Default values on inputs will be provided where possible in all cases.
•	Usage of Free Text fields is limited unless necessary.
•	All input fields will be validated on both client and server side where possible.

8.2.	Potential System Diagrams
8.2.1.	Decoupled Generic

 
8.2.2.	Jira Based
 
8.3.	Workflows
8.3.1.	Alerts
 
8.3.2.	Matters
 

8.4.	Screens
8.4.1.	Alert
 
8.4.2.	Alert Detail
 
8.4.3.	Matter
 
8.4.4.	Matter Detail
 
8.4.5.	Advanced Search
 
8.4.6.	Notifications
 
8.4.7.	Notification Dialog
 
8.4.8.	Reports
 
8.4.9.	LH Flyout
 
8.4.10.	Administration
 

8.5.	General Functionality
•	All Grid views will be sortable, orderable, exportable, and pageable.
•	Alerts and Matters views consist of two views, Grid and Details.
8.5.1.	Audit/History Logging
•	A core feature of SMS will be a robust and comprehensive event and user history audit log.
•	Retro run logging
•	History for all user and system events on a per Alert, Matter or SR basis
•	History of all incoming alert, time, parameters etc.
8.5.2.	Notifications
•	SMS will contain a user notification system to surface important information to the current user.
•	New notifications, and the count of them, will be displayed to user in the right-hand side of the Menu bar, which can be viewed by clicking on them, which will toggle the Notifications overlay.
•	Notification types:
o	New assigned Alert
o	New assigned Matter
o	Matter or Alert promoted for review by Supervisor.
o	Document submission by external firm for an Alert/Matter

8.5.3.	Header Menu
•	A free text search field will be in visible in all Grid views.
•	An advanced search toggle will be visible in all Grid views, while the advanced search will display fields dependent on current Grid view.
•	New Notification counter will be displayed in right hand side which will toggle Notification’s view. If there are no Notifications in ‘new’ state nothing will be shown.
•	A hidden menu will be placed on left hand side, toggleable via ‘hamburger’ placed in the top left menu bar.
o	Items displayed in the menu will be shown based on current User role.
o	Displayed items:
	Alerts
	Matters
	Reports
	Notifications
	Administration
8.6.	Alerts
•	Where alerts generated, from alert generation systems or user created, are managed within SMS
•	Grid view is sorted in Alert Id descending order by default.

8.6.1.	Menu Links
#	Tab	Description
1	Open Alerts	Displays all Alerts not in Closed state
2	My Alerts	Displays all assigned to current User
3	Unassigned	Displays all Alerts in New state
4	All Alerts	Displays all Alerts in all states

8.6.2.	Menu Buttons
9.	Menu Buttons:
#	Button	Description	Details
1	Escalate to new Matter	Mechanism to create new Matter from one or many alerts	Disabled until one or many Alerts are selected via checkbox. Pops Matter creation dialog.
2	Add to existing Matter	Allows user to add alert to an existing matter	Disabled until one or many Alerts are selected via checkbox. Pops grid view that allows user to add alert to an existing Matter
3	Close NFA	Allows user to close an alert ‘No Further Action’	Pops a dialog that allows user to close one or many alerts NFA. Presents user with a drop down of closing reasons and a free text field for closing comments. Both fields are mandatory to closer alert.
4	Create new Alert	Allows user to create an alert manually	Pops a dialog that allows user to manually create an alert based off input. Alert ID is automatically assigned based off Month/Day and current latest alert ID.
5	Refresh	Refreshes list of currently displayed alerts	

9.1.1.	Advanced Search Fields
#	Field	Description	Type
1	Assignee	Current Assignee of Alert	Typeahead/Dropdown
2	Alert Type	Type/Name of Alert	Typeahead/Dropdown
3	Firm	Firm associated with Alert	Typeahead/Dropdown
4	Market	Market associated with Alert	Typeahead/Dropdown
5	Datetime Range	Datetime range, default value: Current date from SOD to present	Datetime Range Picker
6	Source	Source system that generated alert	Typeahead/Dropdown
7	Status	Current status of alert (new, assigned, closed etc.)	Typeahead/Dropdown

9.1.2.	Grid Fields
#	Field	Description	Opt. (?)/Req. (*)
1	Alert Id	Alert ID for alert, clicking on this will open Alert details for view this Alert Id.	*
2	Status	Status of alert	*
3	Alert Type	Alert type name	*
4	Symbol	Symbol(s) associated with Alert (show ... after certain length)	?
5	Firm	Firm(s) associated with Alert (show ... after certain length)	?
6	Last Updated	Last time alert was updated by user or SMS	*
7	Exchange	Market associated with Alert	*
8	Lead Assignee	Lead Assignee currently assigned to Alert	*
9	Supervisor	Super currently associated with Alert	?

9.1.3.	Details Fields
#	Field	Description	Requirements	Opt. (?)/Req. (*)
1	Alert Id	Unique auto generated ID of alert in format of
A-YYYY-MM-DD-{AutoIncrementedNumber}	Generated by SMS	*
2	Source	Source system that generated Alert (e.g., SMARTS, DeepHaven, Manual etc.)	Typeahead/Dropdown	*
3	Status	Status of Alert. New, Handled, Closed, Added to Matter	Typeahead/Dropdown	*
	Alert generation date/time	Time the alert was generated by the Source system.	Passed in from Alert system	
4	Alert Received date/time	Time the alert was received/added to SMS.	Generated by SMS	*
5	Last updated	Last event recorded on individual alert either by Source system or User action	Calculated by SMS	*
6	Age (Days)	Age of alert in days, starting at 1	Calculated by SMS	*
7	Closing date/time	Datetime at which Alert was closed. This will take the associated Matters closing datetime where applicable	Datetime Picker	*
8	Lead	Lead assignee of the Alert	Typeahead/Dropdown	*
9	Supervisor	Supervisor of Lead assignee	Set by SMS w/ option to change via Dropdown	*
10	Alert Type	Name of surveillance/alert type	Passed in by Alert system, set by SMS	*
11	Symbol(s)	One or more symbols associated with the Alert	Passed in by Alert system, set by SMS	*
12	Market	Market associated with Alert (e.g., MEMX, Nasdaq etc.)	Passed in by Alert system, set by SMS	*
13	Firm(s)/CRD	Firm(s)/CRD(s) that the Alert are associated with	Passed in by Alert system, set by SMS	*

9.1.4.	Document Fields
#	Field	Description	Type
1	Title	Name of file less extension	Set by SMS
2	Type	Research, Memo, Press Release, Complaint etc.	Typeahead/Dropdown
3	Uploaded Date	Date/time file was uploaded to SMS	Set by SMS
4	Source	Source of document, user uploaded, external submission etc.	Set by SMS
5	File type	File extension	Set by SMS
6	Version	Version of file	Set by SMS

9.1.5.	Tabs
#	Name	Purpose
1	Documents	List of alerts associated with current Matter, with clickable links to Alert details
2	History	Detailed history of Matter events from creation to current state

9.1.6.	Notifications
#	Event	Notification Purpose	Recipient	State
1	Document received from outside firm	To notify lead/backup assignee that a document has come in from outside firm	Lead / Backup assignee
(Lead/Backup/Supervisor)
{Lead/Backup/Supervisor}	Review / In investigation
(Supervisory Review)
{Closed}
2	Alert updated	A field in a matter has been updated by User	Backup assignee
Lead assignee/backup assignee	Review / In investigation

(Supervisory Review)
3	In Investigation -> Supervisory Review	To notify supervisor a Matter has changed state	Supervisor	Supervisory Review

9.1.7.	State Transition Buttons
#	Name	Start State	End State	Role
1	Close	New / Assigned	Close NFA	Analyst
Supervisor
2	Create Matter	New / Assigned	Matter	Analyst
Supervisor
3	Add to Existing Matter	New / Assigned	Added To Matter	Analyst
Supervisor

9.2.	Matters
•	View where Matters are managed. A matter can optionally contain one or many alerts.
•	Grid view is sorted in Matter ID descending order by default.

9.2.1.	Aging
•	Matter aging starts at 1 day and is non exclusionary.
•	Upon merging of matters, the remaining matter takes the age of the older matter.

9.2.2.	Menu Links
#	Tab	Description
1	My Matters	Displays all Matters assigned to current user, date descending
2	Closed	Displays all closed matters, date descending
3	All	Displays all Matters in all states, date descending

9.2.3.	Menu Buttons
#	Button	Description	Details
1	Create new Matter
	Creates a new matter	Opens create matter dialog, presenting user with fields necessary for creation.
2	Merge Matter	Allows user to merge one matter into another	Only enabled when one matter is selected
Opens dialog to select which matter to merge into. 
Resulting single matter takes age of oldest matter.
3	Refresh	Allows user to close an alert ‘No Further Action’	Refreshes matter data from server

9.2.4.	Advanced Search Fields
#	Field	Description	Type
1	Assignee	Current Assignee of Matter	Typeahead/Dropdown
2	Source	Source system that generated alert	Typeahead/Dropdown
3	Open date range	Date matter opened, inclusive	Datetime Range picker
4	Close date range	Date matter closed, inclusive	Datetime Range picker
5	Firm(s)	Firm(s) associated with a matter	Multi Typeahead/Dropdown
6	Symbols(s)	Symbol(s) associated with a matter	Multi Typeahead/Dropdown
7	Rule	Rule associated with matters	Typeahead/Dropdown
8	Supervisor	Supervisor assigned to a matter	Typeahead/Dropdown
9	Status	Status of matter	Typeahead/Dropdown
10	Disposition	Disposition type associated with a matter	Typeahead/Dropdown
11	Market	Market associated with matter	Typeahead/Dropdown

9.2.5.	Grid Fields
#	Field	Description	Opt. (?)/Req. (*)
1	Matter Id	Matter ID for alert, clicking on this will open Matter details for view this Matter Id	*
2	Status	Status of Matter	*
3	Open Date	Opening date for Matter	*
4	Close Date	Closing date for Matter	?
5	Title	Title of Matter	?
6	Priority	Matter priority	*
7	Source	Source of Matter (Surveillance System, Manual etc.)	*
8	Lead Assignee	Lead Assignee currently assigned to Matter	*
9	Days Open	Days Matter has been open, starting with 1	?
10	Merged Into	Id of Matter this has been merged into. Newer into Older only.	?
11	Firm	Firm(s) associated with Matter (show ... after certain length)	?

9.2.6.	Details Fields
#	Field	Description	Requirements	Opt. (?)/Req. (*)
1	Matter Id	Unique auto generated ID of alert in format of
M-YYYY-MM-DD-{AutoIncrementedNumber}	Generated by SMS	-
2	Open Date	Date/Time matter is created	Generated by SMS	-
3	Last Event	Date/Time of last Matter update event	Calculated by SMS	-
4	Days Open	How many days Matter has been open, starting from 1	Calculated by SMS	-
5	Status	Open, Referred to Supervisor etc.	Typeahead/Dropdown	*
6	Milestone	Current point in Matter workflow	Calculated by SMS	-
7	Lead Assignee	Analyst assigned to Matter	Typeahead/Dropdown	*
8	Backup Assignee	Backup analyst for Matter	Typeahead/Dropdown	?
9	Supervisor	Supervisor assigned to Matter	Typeahead/Dropdown	*
10	Referred To		Typeahead/Dropdown	?
11	Opened By	User that created Matter	Typeahead/Dropdown	*
12	Opening Comments		Free Text	?
13	Closing Comments		Free Text	*
14	Review Period Start		Calculated by SMS	-
15	Review Period End		Calculated by SMS	-
16	Product	Equities, options, etc. One to many	Typeahead/Dropdown	*
17	Exchange	Exchange related to Matter	Typeahead/Dropdown	*
18	Rules	One or many rules that pertain to Matter	Typeahead/Dropdown	*
19	Merged Matters	List of matters that have been merged into this matter, if any	Calculated by SMS	?
20	Related Matters	List of matters designated as Related, if any	Calculated by SMS	?
21	Symbol(s)	List of symbols related to Matter	Typeahead/Dropdown	?
22	Firm(s)	List of firms related to Matter	Typeahead/Dropdown	?
23	Related Party		Typeahead/Dropdown	?
24	Surveillance(s)	List of surveillances relevant to Matter	Typeahead/Dropdown	*
25	Outside Firm Submission Toggle	This creates a repository/linkage to User Portal for external firm document submission.	Checkbox	?

9.2.7.	Document Fields
#	Field	Description	Type
1	Title	Name of file less extension	Set by SMS
2	Type	Research, Memo, Press Release, Complaint etc.	Typeahead/Dropdown
3	Uploaded Date	Date/time file was uploaded to SMS	Set by SMS
4	Source	Source of document, user uploaded, external submission etc.	Set by SMS
5	File type	File extension	Set by SMS
6	Version	Version of file	Set by SMS

9.2.8.	Tabs
#	Name	Purpose
1	Alerts	List of alerts associated with current Matter, with clickable links to Alert details
2	Events	Calendar type associated with Matter added manually by user such as upcoming dates, and other metadata
3	Dispositions	A Matter can have one or more dispositions associated with it.
4	History	Detailed history of Matter events from creation to current state
5	Merged Tree	Tree view of Matter, showing alerts, into matter, matter into other matters etc.
6	Documents	Documents associated with Matter

9.2.9.	Notifications
#	Event	Notification Purpose	Recipient	State
1	Document received from outside firm	To notify lead/backup assignee that a document has come in from outside firm	Lead / Backup assignee
(Lead/Backup/Supervisor)
{Lead/Backup/Supervisor}	Review / In investigation
(Supervisory Review)
{Closed}
2	Matter updated	A field in a matter has been updated by User	Backup assignee
Lead assignee/backup assignee	Review / In investigation

(Supervisory Review)
3	In Investigation -> Supervisory Review	To notify supervisor a Matter has changed state	Supervisor	Supervisory Review

9.2.10.	State Transition Buttons
#	Name	Start State	End State	Role
1	Supervisory Review	Review / In Investigation	Supervisory Review	Analyst
Supervisor
2	Close	Supervisory Review	Closed	Supervisor
3	Review / Investigation	Supervisory Review	Review / Investigation	Analyst
Supervisor

9.3.	Operational Dashboard
•	This dashboard will display various metrics important to the operational health and integrity of the system. It may feature some command-and-control functionality. This dashboard will be heavy permissions based.
9.4.	Administration / User Configuration Options
•	User Role
o	Name
•	User
o	Where an SMS administrator can add/edit SMS users
o	SMS will be able to use Identity Providers for allow/deny access with 3rd party password, however key aspects of the user’s permissions are assigned at the application level.
o	User:
	First Name
	Last Name
	Email address
	Supervisor
	User Role
	Active/Inactive
•	Alert Type
o	This is where fields for incoming alert types are defined. The definitions contained here allow SMS to understand what type and what to do with properties from incoming alerts
•	Rule
•	Firm/MPID/CRD
•	Symbol
•	Notification
•	Alert
•	Matter
•	Document
•	File type
•	NFA Reason
•	Source
o	SMARTS
o	Manual
•	Flow/State management for Alerts, Matters, SR’s
10.	Investigatory Tools
10.1.	Reporting
10.1.1.	General
•	SMS will have a 3rd party Business Intelligence platform embedded within the application such that a user will be able to select from a list of pre-defined reports and view/filter them without having to leave the SMS application
•	BI Connectors will be used to connect to one or more surveillance system databases
•	Reports will be created in BI platform and embedded into SMS
•	https://powerbi.microsoft.com/en-us/blog/easily-embed-secure-power-bi-reports-in-your-internal-portals-or-websites/

10.1.2.	Reports
10.1.2.1.	Matter Aging
10.1.2.2.	Alert counts
10.1.2.3.	Market Making (see section 9.2)
10.2.	Replay
10.3.	Spread
11.	Surveillance Patterns
11.1.	Alerts
11.1.1.	Wash Trade A-A
11.1.1.1.	Overview
•	This alert identifies participants that execute trades in which they are both the buyer and the seller, which increase the volume without changing beneficial ownership.

11.1.1.2.	Relevant Rules
•	MEMX Rule 12.2 Fictitious Transactions   
•	No Member, for the purpose of creating or inducing a false or misleading appearance of activity in a security traded on the Exchange or creating or inducing a false or misleading appearance with respect to the market in such security shall:   
•	(1) execute any transaction in such security which involves no change in the beneficial ownership thereof, or   
•	(2) enter any order or orders for the purchase of such security with the knowledge that an order or orders of substantially the same size, and at substantially the same price, for the sale of such security, has been or will be entered by or for the same or different parties, or   
•	(3) enter any order or orders for the sale of any such security with the knowledge that an order or orders of substantially the same size, and at substantially the same price, for the purchase of such security, has been or will be entered by or for the same or different parties.   

11.1.1.3.	Parameters
Parameter 	Description 	Type 
TRADE_DATE 	Trade Date passed YYYY-MM-DD 	Date
MIN_NOTIONAL 	Minimum value that a trade must have to be considered in calculations  	Price  
MIN_VOLUME 	Minimum volume that a trade must have to be considered in calculations  	Integer 
WASH_TIME_DIFF_SECONDS 	The time difference between each trade's orders must be less than this value to qualify as a wash sale  	Integer  
EXCHANGE_CODE 	The code of the exchanges considered in this surveillance 	Char Array  

11.1.1.4.	Surveillance Logic
Step # 	Description 
10 	Get Clearing Records where exchange code are in EXCHANGE_CODES, ExecutedQuantity greater than or equal to MIN_VOLUME, and ExecutionPrice times ExcutedQuantity greater than or equal to MIN_NOTIONAL for one trade day 
20 	Get Firm Account info 
30 	Get Firm Info 
40 	Join Firm and Account info 
50 	Get Orders 
60  	Join Orders to Clearing Records on Exchange Order Id and Symbol for buy and sell side to get order times 
70 	Get Trades 
80 	Join Trades to Clearing Records On Exchange Order Id and Match Id 
90 	Remove records where Buyer seller account id and firm id’s don’t match 
100 	Remove records where Orders are outside the bounds of WASH_TIME_DIFF 

11.1.1.5.	Report Specifications 
# 	Column 	Description 
1 	Trade Date 	 
2 	Trade Time 	The time the trade that triggered this Alert occurred 
3 	Firm Name 	 
4 	Firm Id 	 
5 	MPID 	 
6 	Account Number 	 
7 	Security 	 
8 	Quantity 	 
9 	Execution Price 	 
10 	Notional 	 
11 	Scenario 	1: P-P, 2: P-A/A-P, 3: A-A 
12 	Buyer Order/Trading Capacity 	 
13 	Seller Order/Trading Capacity 	 

11.1.2.	High Order Rate

11.2.	Market Making
