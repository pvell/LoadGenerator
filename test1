#!/bin/bash

# Define variables
current_month=$(date +'%Y-%m')
previous_month=$(date -d 'last month' +'%Y-%m')
source_folder="/path/to/source"
destination_folder="/path/to/destination"

# Create the destination folder if it doesn't exist
mkdir -p "$destination_folder"

# Move .db files created in the previous month to the destination folder
find "$source_folder" -maxdepth 1 -type f -name "*.db" -newermt "$previous_month-01" ! -newermt "$current_month-01" -exec mv {} "$destination_folder" \;

# Compress the destination folder
tar -czf "$destination_folder/$previous_month.tar.gz" -C "$destination_folder" .

echo "Files moved and compressed successfully."
