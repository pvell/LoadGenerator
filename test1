#!/bin/bash

# Specify the directory containing attachment files
attachment_dir="/path/to/attachment_directory"

# Temporary directory for storing attachments
temp_dir=$(mktemp -d)

# Check if the attachment directory exists
if [ ! -d "$attachment_dir" ]; then
  echo "Attachment directory not found: $attachment_dir"
  exit 1
fi

# Copy attachment files to the temporary directory
cp "$attachment_dir"/* "$temp_dir"

# Email configuration
recipient="recipient@example.com"
subject="Email Subject"
body="Email body text"
sender="sender@example.com"
smtp_server="smtp.example.com"
smtp_port="587"
smtp_user="your_username"
smtp_password="your_password"

# Compress the attachments
zip_file="$temp_dir/attachments.zip"
zip -rj "$zip_file" "$temp_dir"/*

# Sending email with attachments using mutt
mutt -s "$subject" -a "$zip_file" -- "$recipient" <<< "$body" \
  -e "set from=$sender" \
  -e "set smtp_url=smtp://$smtp_user:$smtp_password@$smtp_server:$smtp_port"

# Clean up the temporary directory and its contents
rm -r "$temp_dir"
